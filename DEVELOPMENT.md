# Local Development Guide

This guide helps you set up the development environment for **react-native-animated-toast-alerts** and run the example application locally.

## Prerequisites

- **Node.js**: >= 18.0.0
- **npm**: >= 8.0.0
- **iOS Development**:
  - Mac OS
  - Xcode (latest version)
  - CocoaPods (`sudo gem install cocoapods`)
- **Android Development**:
  - Java Development Kit (JDK) 17+
  - Android Studio

## Project Structure

- `src/`: Source code of the library.
- `lib/`: Compiled output (generated by `npm run build`).
- `example/`: A React Native app to test the library.

## Setup Instructions

### 1. Install Root Dependencies

First, install the dependencies for the library itself and build it:

```bash
npm install
npm run build
```

### 2. Setup Example App

Navigate to the `example` directory and install its dependencies. This relies on the local library build.

```bash
cd example
npm install
```

### 3. iOS Setup

If you are developing for iOS, you need to install CocoaPods in the `example/ios` directory:

```bash
cd example/ios
pod install
cd ..
```

> **Note**: If `pod install` fails, try `pod install --repo-update`.

## Running the Example

Open two terminal windows.

### Terminal 1: Start Metro Bundler

This handles the Javascript bundling. We have configured Metro to watch the parent directory so you can edit `src/` files and see changes instantly.

```bash
cd example
npm start
```

> **Tip**: If you run into issues with cached files, run `npm start -- --reset-cache`.

### Terminal 2: Launch App

**For iOS:**

```bash
cd example
npm run ios
```

**For Android:**

```bash
cd example
npm run android
```

## Development Workflow

1.  Keep `npm start` running in the `example` folder.
2.  Make changes to files in the `src/` folder of the root directory.
3.  The example app should automatically hot-reload.
4.  If you change type definitions, you might need to run `npm run build` in the root explicitly.

## Testing with npm pack

To simulate installing the package from npm (verifying that `.npmignore` and `package.json` are correct):

1.  **Build and Pack the Library**:

    ```bash
    # In the root directory
    npm run build
    npm pack
    ```

    This will generate a file like `react-native-animated-toast-alerts-x.x.x.tgz`.

2.  **Install in Example App**:

    ```bash
    cd example
    npm install ../react-native-animated-toast-alerts-*.tgz
    ```

3.  **Clean and Run**:
    ```bash
    # You might need to reset cache since dependencies changed
    npm start -- --reset-cache
    ```

## Troubleshooting

### iOS Build Fails (Exit Code 65)

If `npm run ios` or `pod install` fails with cryptic errors:

1.  Open `example/ios/example.xcworkspace` in Xcode.
2.  Build the project from Xcode (`Cmd+B`) to see the actual error message.
3.  Common fixes:
    - Update CocoaPods: `sudo gem install cocoapods`
    - Clear derived data: `rm -rf ~/Library/Developer/Xcode/DerivedData`
    - Re-install pods: `cd example/ios && rm -rf Pods Podfile.lock && pod install`

### Android Build Fails

- Ensure you have a simulator running or a device connected via USB.
- Check your `ANDROID_HOME` environment variable.
- Clean the build: `cd example/android && ./gradlew clean`.

### Metro Connection Issues

If the app says it cannot connect to Metro:

- Ensure `npm start` is running.
- Ensure the device/emulator is on the same network.
- For Android, run `adb reverse tcp:8081 tcp:8081`.

### Linting & Formatting

This project uses **ESLint** and **Prettier** with a pre-commit hook.

- Run `npm run lint` to check for errors.
- Run `npm run format` to fix formatting automatically.
